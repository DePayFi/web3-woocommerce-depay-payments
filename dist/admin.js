!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";const e="/Users/sebastian/Work/DePay/web3-woocommerce-depay-payments/src/admin/AdminSettingsPage.js";window.React.useRef;const t=window.React.useState,a=window.React.useEffect;function s(s){const{Button:i}=window.wp.components,[c,n]=t(!1),[l,o]=t(),[r,m]=t(),[_,d]=t();return a((()=>{wp.api.loadPromise.then((()=>{(new wp.api.models.Settings).fetch().then((e=>{m(e.depay_wc_receiving_wallet_address),e.depay_wc_tokens&&d(JSON.parse(e.depay_wc_tokens)),n(!0)}))}))}),[]),c?React.createElement("div",{__self:this,__source:{fileName:e,lineNumber:72}},React.createElement("div",{className:"woocommerce-section-header",__self:this,__source:{fileName:e,lineNumber:74}},React.createElement("h2",{className:"woocommerce-section-header__title woocommerce-section-header__header-item",__self:this,__source:{fileName:e,lineNumber:75}},"Settings"),React.createElement("hr",{role:"presentation",__self:this,__source:{fileName:e,lineNumber:78}})),React.createElement("div",{className:"woocommerce-settings__wrapper",__self:this,__source:{fileName:e,lineNumber:81}},React.createElement("div",{className:"woocommerce-setting",__self:this,__source:{fileName:e,lineNumber:82}},React.createElement("div",{className:"woocommerce-setting__label",__self:this,__source:{fileName:e,lineNumber:83}},React.createElement("label",{for:"depay-woocommerce-payment-receiver-address",__self:this,__source:{fileName:e,lineNumber:84}},"Wallet Address")),React.createElement("div",{className:"woocommerce-setting__input",__self:this,__source:{fileName:e,lineNumber:88}},React.createElement("div",{className:"woocommerce-setting__options-group",__self:this,__source:{fileName:e,lineNumber:89}},React.createElement("div",{className:"components-base-control",__self:this,__source:{fileName:e,lineNumber:90}},React.createElement("input",{id:"depay-woocommerce-payment-receiver-address",type:"text",value:r,onChange:e=>m(e.target.value),__self:this,__source:{fileName:e,lineNumber:91}}))),React.createElement("div",{className:"woocommerce-setting__input__addition",__self:this,__source:{fileName:e,lineNumber:99}},React.createElement("button",{type:"button",className:"components-button is-secondary",onClick:async()=>{let{account:e,accounts:t,wallet:a}=await window.DePayWidgets.Connect();m(e)},__self:this,__source:{fileName:e,lineNumber:100}},"Connect Wallet")),React.createElement("div",{__self:this,__source:{fileName:e,lineNumber:102}},React.createElement("p",{class:"description",__self:this,__source:{fileName:e,lineNumber:103}},"This address is used to receive payments.",React.createElement("br",{__self:this,__source:{fileName:e,lineNumber:105}}),React.createElement("strong",{__self:this,__source:{fileName:e,lineNumber:106}},"Please double check that it is set to your wallet address.")))))),React.createElement("div",{className:"woocommerce-settings__wrapper",__self:this,__source:{fileName:e,lineNumber:113}},React.createElement("div",{className:"woocommerce-setting",__self:this,__source:{fileName:e,lineNumber:114}},React.createElement("div",{className:"woocommerce-setting__label",__self:this,__source:{fileName:e,lineNumber:115}},React.createElement("label",{__self:this,__source:{fileName:e,lineNumber:116}},"Accepted Payments")),React.createElement("div",{className:"woocommerce-setting__input",__self:this,__source:{fileName:e,lineNumber:120}},React.createElement("div",{className:"woocommerce-setting__options-group",__self:this,__source:{fileName:e,lineNumber:121}},_&&_.map(((t,a)=>React.createElement("table",{key:a,class:"wp-list-table widefat fixed striped table-view-list page",style:{marginBottom:"0.4rem"},__self:this,__source:{fileName:e,lineNumber:125}},React.createElement("tr",{__self:this,__source:{fileName:e,lineNumber:126}},React.createElement("td",{style:{padding:"1rem 1rem 0.4rem 1rem",display:"flex"},__self:this,__source:{fileName:e,lineNumber:127}},React.createElement("img",{src:t.logo,style:{width:"3rem",height:"3rem"},__self:this,__source:{fileName:e,lineNumber:128}}),React.createElement("div",{style:{paddingLeft:"1rem",paddingBottom:"0.3rem"},__self:this,__source:{fileName:e,lineNumber:129}},React.createElement("div",{__self:this,__source:{fileName:e,lineNumber:130}},React.createElement("strong",{__self:this,__source:{fileName:e,lineNumber:130}},t.symbol)," (",t.name,")"),React.createElement("div",{__self:this,__source:{fileName:e,lineNumber:131}},"on ",t.blockchain.toUpperCase()),React.createElement("div",{class:"row-actions visible",__self:this,__source:{fileName:e,lineNumber:132}},React.createElement("span",{class:"delete",__self:this,__source:{fileName:e,lineNumber:133}},React.createElement("a",{href:"#",onClick:()=>(e=>{_.splice(e,1),d(_)})(a),__self:this,__source:{fileName:e,lineNumber:134}},"Remove")))))))))),React.createElement("div",{className:"woocommerce-setting__input__addition",__self:this,__source:{fileName:e,lineNumber:145}},React.createElement("button",{onClick:async()=>{let e=await DePayWidgets.Select({what:"token"});d(_ instanceof Array?_.concat([e]):[e])},type:"button",className:"components-button is-secondary",__self:this,__source:{fileName:e,lineNumber:146}},"Add Token")),React.createElement("div",{__self:this,__source:{fileName:e,lineNumber:148}},React.createElement("p",{class:"description",__self:this,__source:{fileName:e,lineNumber:149}},"Each incoming payment will be converted on-the-fly into your selected tokens on the selected blockchain. Payment senders will be able to use any routable token as means of payment. Tokens will be converted on-the-fly using decentralized finance to ensure you will always get the tokens you've configured."),React.createElement("p",{class:"description",__self:this,__source:{fileName:e,lineNumber:154}},React.createElement("strong",{__self:this,__source:{fileName:e,lineNumber:155}},"Payments are peer-to-peer and will always be sent directly to your wallet.")))))),React.createElement("div",{className:"woocommerce-settings__wrapper",__self:this,__source:{fileName:e,lineNumber:162}},React.createElement("div",{className:"woocommerce-setting",__self:this,__source:{fileName:e,lineNumber:163}},React.createElement("div",{className:"woocommerce-setting__label",__self:this,__source:{fileName:e,lineNumber:164}}),React.createElement("div",{className:"woocommerce-setting__input",__self:this,__source:{fileName:e,lineNumber:165}},React.createElement(i,{isPrimary:!0,isLarge:!0,onClick:()=>(()=>{if(!r&&!_)return;o(!0),new window.wp.api.models.Settings({depay_wc_receiving_wallet_address:r,depay_wc_tokens:JSON.stringify(_),depay_wc_accepted_payments:JSON.stringify(_.map((e=>({blockchain:e.blockchain,token:e.address,receiver:r}))))}).save().then((e=>{o(!1),window.location.search="?page=wc-admin&path=%2Fdepay%2Ftransactions"}))})(),disabled:l,__self:this,__source:{fileName:e,lineNumber:166}},"Save Settings"))))):null}const i="/Users/sebastian/Work/DePay/web3-woocommerce-depay-payments/src/admin/AdminTransactionsPage.js",c=window.React.useEffect;function n(e){return c((()=>{wp.api.loadPromise.then((()=>{(new wp.api.models.Settings).fetch().then((e=>{e.depay_wc_receiving_wallet_address||e.depay_wc_accepted_payments||e.depay_wc_tokens||(window.location.search="?page=wc-admin&path=%2Fdepay%2Fsettings")}))}))}),[]),React.createElement("div",{__self:this,__source:{fileName:i,lineNumber:21}},React.createElement("div",{className:"woocommerce-section-header",__self:this,__source:{fileName:i,lineNumber:22}},React.createElement("h2",{className:"woocommerce-section-header__title woocommerce-section-header__header-item",__self:this,__source:{fileName:i,lineNumber:23}},"Transactions"),React.createElement("hr",{role:"presentation",__self:this,__source:{fileName:i,lineNumber:26}})))}const l=window.React.useEffect;function o(e){return l((()=>{window.location.search="?page=wc-admin&path=%2Fdepay%2Fsettings"}),[]),null}!function(e,t){wp.api.loadPromise.then((()=>{(new wp.api.models.Settings).fetch().then((a=>{let s=!!(a.depay_wc_receiving_wallet_address&&a.depay_wc_accepted_payments&&a.depay_wc_tokens);t.addFilter("woocommerce_admin_onboarding_task_list","depay-woocommerce-payments",(t=>{const a={key:"setup_depay_wc_payments",title:"Set up DePay",content:"Simply connect your wallet and select the tokens you want to receive as payments.",container:e.createElement(o,{__self:this,__source:{fileName:"/Users/sebastian/Work/DePay/web3-woocommerce-depay-payments/src/admin.js",lineNumber:21}}),completed:s,visible:!s,additionalInfo:"Simply connect your wallet and select the tokens you want to receive as payments.",time:"1 minute",isDismissable:!1,type:"extension"};return[...t,a,{...a,key:"payments",visible:!1}]}))}))})),t.addFilter("woocommerce_admin_pages_list","depay-woocommerce-payments",(e=>(e.push({container:s,path:"/depay/settings",breadcrumbs:["DePay","Settings"],capability:"manage_woocommerce",wpOpenMenu:"toplevel_page_wc-admin-path--depay-settings",navArgs:{id:"depay-woocommerce-payments-settings"}}),e.push({container:n,path:"/depay/transactions",breadcrumbs:["DePay","Transactions"],capability:"manage_woocommerce",wpOpenMenu:"toplevel_page_wc-admin-path--depay-settings",navArgs:{id:"depay-woocommerce-payments-transactions"}}),e)))}(window.React,window.wp.hooks)}));
