!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";!function(){jQuery((function(e){e(document).ajaxError((function(){"function"==typeof window._depayUnmountLoading&&window._depayUnmountLoading()})),e(document).ajaxComplete((function(){"function"==typeof window._depayUnmountLoading&&window._depayUnmountLoading()})),e("form.woocommerce-checkout").on("submit",(async()=>{if(e("form.woocommerce-checkout").serialize().match("payment_method=depay_wc_payments")){let{unmount:e}=await DePayWidgets.Loading({text:"Loading payment data..."});setTimeout(e,1e4)}}))}));const e={ethereum:"0x9Db58B260EfAa2d6a94bEb7E219d073dF51cc7Bb",bsc:"0x9Db58B260EfAa2d6a94bEb7E219d073dF51cc7Bb",polygon:"0x9Db58B260EfAa2d6a94bEb7E219d073dF51cc7Bb",solana:"5hqJfrh7SrokFqj16anNqACyUv1PCg7oEqi7oUya1kMQ",fantom:"0x9Db58B260EfAa2d6a94bEb7E219d073dF51cc7Bb",gnosis:"0x9Db58B260EfAa2d6a94bEb7E219d073dF51cc7Bb",avalanche:"0x9Db58B260EfAa2d6a94bEb7E219d073dF51cc7Bb",arbitrum:"0x9Db58B260EfAa2d6a94bEb7E219d073dF51cc7Bb",optimism:"0x9Db58B260EfAa2d6a94bEb7E219d073dF51cc7Bb",base:"0x9Db58B260EfAa2d6a94bEb7E219d073dF51cc7Bb",worldchain:"0x9Db58B260EfAa2d6a94bEb7E219d073dF51cc7Bb"},a=async()=>{if(window.location.hash.startsWith("#wc-depay-checkout-")){const a=window.location.hash.match(/wc-depay-checkout-(.*?)@/)[1],o=JSON.parse(await wp.apiRequest({path:`/depay/wc/checkouts/${a}`,method:"POST"}));if(o.redirect)return void(window.location=o.redirect);let t={accept:o.map((a=>({...a,fee:{amount:"1.5%",receiver:e[a.blockchain]}}))),closed:()=>{window.location.hash="",window.location.reload(!0)},track:{method:e=>new Promise(((o,t)=>{try{wp.apiRequest({path:`/depay/wc/checkouts/${a}/track`,method:"POST",data:e}).done((()=>o({status:200}))).fail(((e,a)=>t(a)))}catch(e){t()}})),poll:{method:()=>new Promise(((e,o)=>{wp.apiRequest({path:"/depay/wc/release",method:"POST",data:{checkout_id:a}}).done((a=>{e(a)})).fail(e)}))}}};window.DEPAY_WC_CURRENCY&&"store"==window.DEPAY_WC_CURRENCY.displayCurrency&&function(e){let a,o=e[0],t=1;for(;t<e.length;){const n=e[t],c=e[t+1];if(t+=2,("optionalAccess"===n||"optionalCall"===n)&&null==o)return;"access"===n||"optionalAccess"===n?(a=o,o=c(o)):"call"!==n&&"optionalCall"!==n||(o=c(((...e)=>o.call(a,...e))),a=void 0)}return o}([window,"access",e=>e.DEPAY_WC_CURRENCY,"access",e=>e.storeCurrency,"optionalAccess",e=>e.length])&&(t.currency=window.DEPAY_WC_CURRENCY.storeCurrency),DePayWidgets.Payment(t)}};document.addEventListener("DOMContentLoaded",a),window.addEventListener("hashchange",a)}()}));
