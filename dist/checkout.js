!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";function e(e){let o,t=e[0],a=1;for(;a<e.length;){const n=e[a],c=e[a+1];if(a+=2,("optionalAccess"===n||"optionalCall"===n)&&null==t)return;"access"===n||"optionalAccess"===n?(o=t,t=c(t)):"call"!==n&&"optionalCall"!==n||(t=c(((...e)=>t.call(o,...e))),o=void 0)}return t}!function(){jQuery((function(e){e(document).ajaxError((function(){"function"==typeof window._depayUnmountLoading&&window._depayUnmountLoading()})),e(document).ajaxComplete((function(){"function"==typeof window._depayUnmountLoading&&window._depayUnmountLoading()})),e("form.woocommerce-checkout").on("submit",(async()=>{if(e("form.woocommerce-checkout").serialize().match("payment_method=depay_wc_payments")){let{unmount:e}=await DePayWidgets.Loading({text:"Loading payment data..."});setTimeout(e,1e4)}}))}));const o={ethereum:"0x9Db58B260EfAa2d6a94bEb7E219d073dF51cc7Bb",bsc:"0x9Db58B260EfAa2d6a94bEb7E219d073dF51cc7Bb",polygon:"0x9Db58B260EfAa2d6a94bEb7E219d073dF51cc7Bb",solana:"5hqJfrh7SrokFqj16anNqACyUv1PCg7oEqi7oUya1kMQ",fantom:"0x9Db58B260EfAa2d6a94bEb7E219d073dF51cc7Bb",gnosis:"0x9Db58B260EfAa2d6a94bEb7E219d073dF51cc7Bb",avalanche:"0x9Db58B260EfAa2d6a94bEb7E219d073dF51cc7Bb",arbitrum:"0x9Db58B260EfAa2d6a94bEb7E219d073dF51cc7Bb",optimism:"0x9Db58B260EfAa2d6a94bEb7E219d073dF51cc7Bb",base:"0x9Db58B260EfAa2d6a94bEb7E219d073dF51cc7Bb"},t=async()=>{if(window.location.hash.startsWith("#wc-depay-checkout-")){const t=window.location.hash.match(/wc-depay-checkout-(.*?)@/)[1],a=JSON.parse(await wp.apiRequest({path:`/depay/wc/checkouts/${t}`,method:"POST",headers:{"X-WP-Nonce":e([wpApiSettings,"optionalAccess",e=>e.nonce])}}));if(a.redirect)return void(window.location=a.redirect);let n={accept:a.map((e=>({...e,fee:{amount:"1.5%",receiver:o[e.blockchain]}}))),closed:()=>{window.location.hash="",window.jQuery("form.woocommerce-checkout").removeClass("processing").unblock()},before:()=>{let e=window.location.host;return!(e.match(/^localhost/)||e.match(/\.local$/)||e.match(/\.local\:/)||e.match(/127\.0\.0\.1/)||e.match(/0\.0\.0\.0/)||e.match(/0:0:0:0:0:0:0:1/)||e.match(/::1/))||(window.alert("Payments can not be tested in local development! Make sure to test in a deployed environment where payment validation callbacks can reach your server!"),!1)},track:{method:o=>new Promise(((a,n)=>{try{wp.apiRequest({path:`/depay/wc/checkouts/${t}/track`,method:"POST",data:o,headers:{"X-WP-Nonce":e([wpApiSettings,"optionalAccess",e=>e.nonce])}}).done((()=>a({status:200}))).fail(((e,o)=>n(o)))}catch(e){n()}})),poll:{method:async()=>{let o=fetch("/index.php?rest_route=/depay/wc/release",{method:"POST",body:JSON.stringify({checkout_id:t}),headers:{"Content-Type":"application/json","X-WP-Nonce":e([wpApiSettings,"optionalAccess",e=>e.nonce])}});if(200==o.status){return await o.json()}}}}};window.DEPAY_WC_CURRENCY&&"store"==window.DEPAY_WC_CURRENCY.displayCurrency&&e([window,"access",e=>e.DEPAY_WC_CURRENCY,"access",e=>e.storeCurrency,"optionalAccess",e=>e.length])&&(n.currency=window.DEPAY_WC_CURRENCY.storeCurrency),console.log(n),DePayWidgets.Payment(n)}};document.addEventListener("DOMContentLoaded",t),window.addEventListener("hashchange",t)}()}));
